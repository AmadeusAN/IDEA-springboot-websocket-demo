<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>好友列表页面</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
</head>

<body class="vh-100 align-items-stretch">
<div class=" main p-3 border-bottom">
    <form id="form">
        <div class="input-group mb-3">
            <span class="input-group-text">ID</span>
            <input type="text" class="form-control" id="id" name="id" placeholder="用户ID">
            <span class="input-group-text">name</span>
            <input type="text" class="form-control" id="name" name="name" placeholder="用户姓名">
            <a class="btn btn-outline-success" onclick="searchfriend()">search</a>
        </div>
    </form>
</div>
<div class="w-100 m-0 " style="height: 85%;">
    <iframe id="myiframe" name="myiframe" th:src="@{/initfriendlist}" width="100%" height="100%"></iframe>
</div>
<script th:src="@{/js/jquery-3.6.0.min.js}"></script>
<script th:src="@{/js/bootstrap.min.js}"></script>
<script type="text/javascript">
    function searchfriend() {
        var id = document.getElementById('id').value;
        var name = document.getElementById('name').value;
        if (typeof id == "undefined" || id == '') id = 0;

        var frame = document.getElementById("myiframe");
        frame.src = "/searchfriend?" + 'id=' + id + '&' + 'name=' + (name != null ? name : null);
        // 有时添加下面的语句会导致请求两次
        // $('#myiframe').attr('src', $('#myiframe').attr('src'));
    }
</script>
</body>

</html>
